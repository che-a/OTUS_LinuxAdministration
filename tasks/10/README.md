## Пользователи и группы. Авторизация и аутентификация
### Содержание
1. [Описание занятия](#description)  
2. [Домашнее задание](#homework)  
3. [Справочная информация](#info)  
    - [Ссылки на полезные ресурсы](#links)
4. [Выполнение](#exec)  
    - [Результаты](#result)   

## 1. Описание занятия <a name="description"></a>
### Цели
- механизмы авторизации и аутентификации;  
- права у пользовталей;  
- управление правами с помощью `sudo`, `umask`, `sgid`, `suid` и более сложными инструментами как `PAM` и `ACL`, PolicyKit.  

### Результаты  
- Участники осваивают инструменты для управлением правами пользовталей, контролем авторизации и выдачи прав.  

## 2. Домашнее задание  <a name="homework"></a>
### Постановка задачи
1. Запретить всем пользователям, кроме группы admin логин в выходные(суббота и воскресенье), без учета праздников.  
2. Дать конкретному пользователю права рута.  

## 3. Справочная информация <a name="info"></a>  

<details>
    <summary></summary>

### Основные термины и определения

PAM (Pluggable Authentication Modules)

- `Аутентификация` — процесс подтверждения пользователем своей “подлинности”. Ввод логина и пароля.  
- `Авторизация` — процесс наделения пользователя правами (предоставления доступа к каким-либо объектам).  
- `Аккаунтинг` — запись информации о произошедших событиях.  

`UID` — организационное разделение, при котором существуют две группы пользователей: одна группа — для демонов, другая — для &laquoживых&raquo пользователей; определяется в `/etc/login.defs` и используется в системных утилитах работы с пользователями и группами.  

### PAM

`PAM` — библиотека, реализующая возможность `AAA` с помощью стандартизированных динамически подгружаемых модулей; конфигурируется в `/etc/pam.d`.  

Аутентификация:  
- `pam_unix` — аутентификация в `/etc/passwd`;  
- `pam_userdb` — аутентификация против (against) BDB-файла;  
- `pam_rootok` — разрешение root’у всего.  
Авторизация:  
- `pam_wheel` — авторизация для сервиса с использованием группы `wheel`.   


###

| Флаг     | Владелец | Группа | Остальные |
|:---------|:---------|:-------|:----------|
| `-`      | `rwx`    | `rwx`  |  `rwx`    |

| oct | bin | mask |
|:----|:----|:-----|
| 0   | 000 | ---  |
| 1   | 001 | --x  |
| 2   | 010 | -w-  |
| 3   | 011 | -wx  |
| 4   | 100 | r--  |
| 5   | 101 | r-x  |
| 6   | 110 | rw-  |
| 7   | 111 | rwx  |

`SUID`, `SGID`  
- Восьмеричные значения для `SUID` и `SGID`: 4000 и 2000.  
- Символьные: `u+s` и `g+s`.  
Для исполняемого файла:  
- Файл будет исполняться с `UID`/`GID` владельца файла.  
Для директории:  
- все созданные в ней файлы будут наследовать `UID`/`GID` директории.  
`Sticky bit`  
- Восьмеричные значения для `sticky bit` - 1000.  
- Символьные: `+t`.  
Для директории:  
- Каталог с установленным `sticky`-битом означает, что удалить файл из этого каталога может только владелец файла или суперпользователь.






###
`/etc/shadow` — системный файл с паролями пользователей;  
`/etc/login.defs` — файл, в котором можно настроить в т.ч. и `UID` (мин. и макс. значения, обычно `UID` < 1000 назначаются системным пользователям);  
`/etc/shells` — доступные командные оболочки;  
`/etc/securetty` — ;  
`id user` — вывод `id` пользователя `user`;  
`/etc/group` — группы пользователей;  
`/etc/gshadow` — на группу можно поставить пароль;  
`chsh` — команда для смены оболочки;  
`groups` — показывает текущую группу;   
`newgrp` — изменить главную группу;  

#### PolicyKit
`pkaction` — список политик;  
`ldd файл` — показывает с какими библиотеками слинкован файл;  

#### ACL
`getfacl file` —




</details>

#### Ссылки на полезные ресурсы <a name="links"></a>
[]() — ;  

## 4. Выполнение <a name="exec"></a>  

### Результаты <a name="result"></a>  
#### Файловая структура Ansible-роли

#### Развертывание nginx

####  Состояние systemd

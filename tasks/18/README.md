## Занятие 18. Архитектура сетей
### Содержание
1. [Описание занятия](#description)  
2. [Домашнее задание](#homework)  
3. [Выполнение](#exec)  

## 1. Описание занятия <a name="description"></a>
### Цели
- Обзор модели `OSI`;  
- протоколы `ARP`, `IP`, `TCP/UDP`, протоколы прикладного уровня;  
- сетевые интерфейсы в Linux;  
- команды `ip`, `tc`, `ss`, `nstat`, `ifconfig`, `netstat`, `route`;  
- заглянем в `/etc/sysconfig/network-scripts`, поснифферим через `tcpdump` и `ngrep`.  

### Краткое содержание
- Модель `OSI`;  
- Инкапсуляция;  
- `ARP`;  
- `IP`;  
- `TCP`;  
- `UDP`;  

### Результаты
- после занятия участники смогу рассказать о сетевой модели `OSI` и о протоколах каждого ее уровня.  
- также смогут настроить сетевой интерфейс на отдельно взятой машине, сменить IP адрес, подсеть, прописать маршрут.  

## 2. Домашнее задание  <a name="homework"></a>
### Постановка задачи
Разворачиваем сетевую лабораторию.  
Дано: Vagrantfile с начальным построением сети:  
- inetRouter  
- centralRouter  
- centralServer  

Необходимо построить следующую архитектуру:  
Сеть office1  
- 192.168.2.0/26 - dev  
- 192.168.2.64/26 - test servers  
- 192.168.2.128/26 - managers  
- 192.168.2.192/26 - office hardware  

Сеть office2  
- 192.168.1.0/25 - dev  
- 192.168.1.128/26 - test servers  
- 192.168.1.192/26 - office hardware  

Сеть central  
- 192.168.0.0/28 - directors  
- 192.168.0.32/28 - office hardware  
- 192.168.0.64/26 - wifi  

```
Office1 ---\
-----> Central --IRouter --> internet
Office2----/
```
Итого должны получится следующие сервера
- inetRouter
- centralRouter
- office1Router
- office2Router
- centralServer
- office1Server
- office2Server

Теоретическая часть:  
- Найти свободные подсети.  
- Посчитать сколько узлов в каждой подсети, включая свободные.  
- Указать broadcast адрес для каждой подсети.  
- проверить нет ли ошибок при разбиении.  

Практическая часть:  
- Соединить офисы в сеть согласно схеме и настроить роутинг.  
- Все сервера и роутеры должны ходить в инет черз inetRouter.  
- Все сервера должны видеть друг друга.  
- у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи.  
- при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс.  

### Критерии оценки
4 - сделана хотя бы часть,  
5 - сделано всё.  

## 3. Выполнение <a name="exec"></a>  
### Теоретическая часть задания
```console
+----------------+------------------+------------------+------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.0/29   |
|                |                  |                  |                  | 192.168.0.0/28   +------------------+
|                |                  |                  |                  |                  | 192.168.0.8/29   |
|                |                  |                  | 192.168.0.0/27   +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.16/29  |
|                |                  |                  |                  | 192.168.0.16/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.24/29  |
|                |                  | 192.168.0.0/26   +------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.32/29  |
|                |                  |                  |                  | 192.168.0.32/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.40/29  |
|                |                  |                  | 192.168.0.32/27  +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.48/29  |
|                |                  |                  |                  | 192.168.0.48/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.56/29  |
|                | 192.168.0.0/25   +------------------+------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.64/29  |
|                |                  |                  |                  | 192.168.0.64/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.72/29  |
|                |                  |                  | 192.168.0.64/27  +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.80/29  |
|                |                  |                  |                  | 192.168.0.80/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.88/29  |
|                |                  | 192.168.0.64/26  +------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.96/29  |
|                |                  |                  |                  | 192.168.0.96/28  +------------------+
|                |                  |                  |                  |                  | 192.168.0.104/29 |
|                |                  |                  | 192.168.0.96/27  +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.112/29 |
|                |                  |                  |                  | 192.168.0.112/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.120/29 |
| 192.168.0.0/24 +------------------+------------------+------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.128/29 |
|                |                  |                  |                  | 192.168.0.128/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.136/29 |
|                |                  |                  | 192.168.0.128/27 +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.144/29 |
|                |                  |                  |                  | 192.168.0.144/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.152/29 |
|                |                  | 192.168.0.128/26 +------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.160/29 |
|                |                  |                  |                  | 192.168.0.160/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.168/29 |
|                |                  |                  | 192.168.0.160/27 +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.176/29 |
|                |                  |                  |                  | 192.168.0.176/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.184/29 |
|                | 192.168.0.128/25 +------------------+------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.192/29 |
|                |                  |                  |                  | 192.168.0.192/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.200/29 |
|                |                  |                  | 192.168.0.192/27 +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.208/29 |
|                |                  |                  |                  | 192.168.0.208/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.216/29 |
|                |                  | 192.168.0.192/26 +------------------+------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.224/29 |
|                |                  |                  |                  | 192.168.0.224/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.232/29 |
|                |                  |                  | 192.168.0.224/27 +------------------+------------------+
|                |                  |                  |                  |                  | 192.168.0.240/29 |
|                |                  |                  |                  | 192.168.0.240/28 +------------------+
|                |                  |                  |                  |                  | 192.168.0.248/29 |
+----------------+------------------+------------------+------------------+------------------+------------------+

```

### Практическая часть задания
#### Описание стенда

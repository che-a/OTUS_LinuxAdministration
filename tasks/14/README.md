## Занятие 14. Резервное копирование
### Содержание
1. [Описание занятия](#description)  
2. [Домашнее задание](#homework)  
3. [Справочная информация](#info)  
4. [Выполнение](#exec)  
   - [](#)


## 1. Описание занятия <a name="description"></a>
### Цели
- Обсуждаем политики и методики резервного копирования.  
- Разбираем некоторые особенности утилит `rsync`, `dd`, `tar`.  
- Практика работы с `BorgBackup`.   

## 2. Домашнее задание  <a name="homework"></a>
### Постановка задачи
Настроить стенд `Vagrant` с двумя виртуальными машинами: server и client.

Настроить политику бэкапа директории `/etc` с клиента:
1) Полный бэкап - раз в день
2) Инкрементальный - каждые 10 минут
3) Дифференциальный - каждые 30 минут

Запустить систему на два часа. Для сдачи ДЗ приложить list jobs, list files jobid=<id> и сами конфиги bacula-*

### Дополнительно
Настроить доп. опции - сжатие, шифрование, дедупликация   

## 3. Справочная информация <a name="info"></a>  
`Bacula` состоит из нескольких программных компонентов и основывается на модели «сервер-клиент». Компоненты сервера Bacula не обязательно запускать на одном сервере.  

Сервер `Bacula` (также сервер бэкапа) включает в себя следующие компоненты:
- Bacula Director (DIR): программное обеспечение, которое управляет операциями резервного копирования и восстановления, выполняемыми демонами File и Storage.  
- Storage Daemon (SD): программное обеспечение, которое выполняет операции чтения и записи на устройствах хранения, используемых для резервного копирования.  
- Catalog (каталог): сервисы, которые поддерживают базу данных резервных копий файлов. Данные хранятся в БД SQL, например, в `MySQL` или `PostgreSQL`.  
- Bacula Console: интерфейс командной строки, который позволяет администратору резервного копирования взаимодействовать с Bacula Director и управлять им.  

Клиент `Bacula` (сервер, данные которого будут копироваться) запускает `File Daemon` (FD). Это программное обеспечение, которое предоставляет серверу `Bacula` (в частности, Bacula Director) доступ к данным, которые нужно скопировать. Такие серверы называются клиентами бэкапа, или просто клиентами.



| Компонент          | Конфигурационный файл  |Компьютер
|:-------------------|:-----------------------|:-------
| Управления         | `bacula-dir.conf`      | Сервер, запускающий демон управления
| Хранения           | `bacula-sd.conf`       | Любой сервер, содержащий демон хранения
| Управления файлами | `bacula-fd.conf`       | Любой клиент, для которого нужно создавать резервные архивы
| Консоль управления | `bconsole.conf`        | Любой компьютер, который можно использовать для управления



## 4. Выполнение <a name="exec"></a>  
### <a name=""></a>  

[Bacula](https://www.bacula.org/)

## Занятие 2. Дисковая подсистема

### Содержание
1. [Описание занятия](#description)  
2. [Домашнее задание](#homework)  
3. [Выполнение](#exec)
   - [Сборка системы с подключенным RAID-массивом](#exec1)  
   - [Сброс существующих RAID-устройств](#reset)
   - [Перенос работающей системы с одним диском на RAID 1](#exec2)  

## 1. Описание занятия <a name="description"></a>
#### Цели
- перечислить виды RAID массивов и их отличия,  
- получить информацию о дисковой подсистеме на любом сервере с ОС Linux,  
- собрать программный рейд и восстановить его после сбоя  

#### Краткое содержание  
- Задачи дисковой системы.  
- Программный и аппаратный RAID.  
- RAID 0/1/5/6/10/60.  
- Получение информации о дисковой системе системе с помощью `dmidecode`, `dmesg`, `smartctl`.  
- MBR и GPT. Команды `gdisk`, `fdisk`, `parted`, `partprobe`.

#### Результаты  
- Студент может собрать различные типы RAID

## 2. Домашнее задание  <a name="homework"></a>
#### Постановка задачи  
Системный администратор обязан уметь работать с дисковой подсистемой, делать это без ошибок, не допускать потерю данных. В этом задании необходимо продемонстрировать умение работать с software raid и инструментами для работы с работы с разделами(`parted`, `fdisk`, `lsblk`).
- работа с `mdadm`;  
- добавить в `Vagrantfile` еще дисков;  
- собрать R0/R5/R10 - на выбор;  
- сломать/починить raid;  
- создать на рейде GPT раздел и 5 партиций.
В качестве проверки принимаются - измененный `Vagrantfile`, скрипт для создания рейда  
#### Дополнительные задания  
- Vagrantfile, который сразу собирает систему с подключенным рейдом.  
- Перенесети работающую систему с одним диском на RAID 1. Даунтайм на загрузку с нового диска предполагается. В качестве проверики принимается вывод команды `lsblk` до и после и описание хода решения (можно воспользовать утилитой `script`).  
#### Критерии оценки  
- &laquo;4&raquo; - сдан `Vagrantfile` и скрипт для сборки, который можно запустить на поднятом образе;  
- &laquo;5&raquo; - сделаны доп. задания.

## 3. Выполнение <a name="exec"></a>  
Развертывание тестового окружения происходит из [Vagrantfile](https://github.com/che-a/OTUS_LinuxAdministrator/blob/master/lesson_02/Vagrantfile) с последующим провижинингом из сценария [script.sh](https://github.com/che-a/OTUS_LinuxAdministrator/blob/master/lesson_02/script.sh), который инициирует обновление системы, установку необходимых пакетов и последовательно создает RAID следующих уровней на дисках `/dev/sdb`, `/dev/sdc`, `/dev/sdd` и `/dev/sde`:  
- RAID 0 и 1,
- RAID 5,  
- RAID 6,  
- RAID 10
  
Диск `/dev/sdf` является резервным диском и предназначен для отработки восстановления работоспособности RAID.  

#### Сборка системы с подключенным RAID-массивом <a name="exec1"></a>

#### Сброс существующих RAID-устройств  <a name="reset"></a>  

#### Перенос работающей системы с одним диском на RAID 1 <a name="exec2"></a>

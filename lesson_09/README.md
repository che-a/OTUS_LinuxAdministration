## Автоматизация администрирования. Ansible
### Содержание
1. [Описание занятия](#description)  
2. [Домашнее задание](#homework)  
3. [Справочная информация](#info)  
4. [Выполнение](#exec)  
    - [Задача 1](#task1)  
    - [Задача 2](#task2)   

## 1. Описание занятия <a name="description"></a>
### Цели
- Автоматизируем рутинные задачи администрирования.  
- Изучаем `Ansible` - хосты, модули, плейбуки, роли, переменные.  
- Знакомимся с другими инструментами - `chef`, `puppet`, `salt`.

### Результаты  
- Уастники осваивают популярный и полезный инструмент администратора - `Ansible`.  
- Могут с помощью него изменить конфиги, установить дополнительный софт и другие действия.  

## 2. Домашнее задание  <a name="homework"></a>
### Постановка задачи 
Подготовить стенд на `Vagrant` как минимум с одним сервером. На этом сервере, используя `Ansible`, необходимо развернуть `nginx` со следующими условиями:
- необходимо использовать модуль `yum/apt`;  
- конфигурационные файлы должны быть взяты из шаблона `jinja2` с перемененными;  
- после установки `nginx` должен быть в режиме `enabled` в `systemd`;  
- должен быть использован `notify` для старта `nginx` после установки;  
- сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в `Ansible`.  
#### Дополнительно
- Сделать все это с использованием `Ansible`-роли.  

#### Критерии оценки:  
Ставим 5 если создан `playbook`;  
Ставим 6 если написана роль.  

## 3. Справочная информация <a name="info"></a>  
    
`Инвентарный файл` — это файл, в котором описываются устройства, к которым `Ansible` будет подключаться. По умолчанию он находится в `/etc/ansible/hosts`.

Но можно создавать свой инвентарный файл и использовать его. Для этого нужно, либо указать его при запуске ansible, используя опцию -i <путь>, либо указать файл в конфигурационном файле Ansible.

Часто инвентарный файл размещают в каталоге inventories, который создают в корне каталога с playbook. Это дает возможность хранить информацию про хосты вместе с остальной информацией в системе контроля версий.

`ansible-doc модуль`  
`ansible-galaxy`  
`ansible-inventory --graph`  
`ansible-inventory --list`  

Если нужны переменные окружения и пайпы, то необходимо использовать модуль `shell`.  
```bash
ansible srv -m shell -a "cat /proc/cpuinfo | grep -i │ name"
```
```console
srv1 | CHANGED | rc=0 >> 
model name      : Intel(R) Xeon(R) CPU           E5450  @ 3.00GHz

srv2 | CHANGED | rc=0 >>
model name      : Intel(R) Xeon(R) CPU           E5450  @ 3.00GHz

srv3 | CHANGED | rc=0 >>
model name      : Intel(R) Xeon(R) CPU           E5450  @ 3.00GHz

srv4 | CHANGED | rc=0 >>
model name      : Intel(R) Xeon(R) CPU           E5450  @ 3.00GHz
```

`ansible -m setup srv` - просомтр информации о хостах.   
`ansible-lint playbook.yml` - отдельная программа для проверки корректности синтаксиса `playbook`-файла.  


```bash
```
```console
```
```bash
```
```

```



## 4. Выполнение <a name="exec"></a>  
Для демонстрации выполнения этого домашнего задания необходимо развернуть тестовое окружение из [Vagrantfile](https://github.com/che-a/OTUS_LinuxAdministrator/blob/master/lesson_08/Vagrantfile). С целью не создавать монстроподобные сценарии провижининга, которые в себе содержат команды по созданию и редактированию множества файлов, все необходимые конфигурационные файлы собраны в каталог [include](https://github.com/che-a/OTUS_LinuxAdministrator/tree/master/lesson_08/include), откуда они рекурсивно копируются в файловую систему виртуальной машины при работе сценария провижининга [script.sh](https://github.com/che-a/OTUS_LinuxAdministrator/blob/master/lesson_08/script.sh).
```console

```


### Задача 1 <a name="task1"></a>  


```bash
```
```console

```

```bash
```
```console

```

### Задача 2 <a name="task2"></a>  

```bash
```
```console

```
  
```bash
```
```console

```

```bash

```
```console

```
